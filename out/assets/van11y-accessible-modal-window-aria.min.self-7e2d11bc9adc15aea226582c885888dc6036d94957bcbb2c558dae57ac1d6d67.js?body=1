/**
 * van11y-accessible-modal-window-aria - ES2015 accessible modal window system, using ARIA (compatible IE9+ when transpiled)
 * @version v1.1.1
 * @link https://van11y.net/accessible-modal/
 * @license MIT : https://github.com/nico3333fr/van11y-accessible-modal-window-aria/blob/master/LICENSE
 */

"use strict";!function(t){function e(t,e){for("string"==typeof e&&(e=document.createElement(e)),t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}function a(t){t.parentNode.removeChild(t)}var n="js-modal",o="label_modal_",l="modal",d="data-modal-background-click",i="data-modal-prefix-class",r="data-modal-text",s="data-modal-content-id",c="data-modal-title",u="data-modal-close-text",m="data-modal-close-title",b="data-modal-close-img",f="modal-close",g="js-modal-close",v="js-modal-close",A="data-content-back-id",C="data-focus-back",p="modal__content",h="js-modal-content",k="modal__closeimg",y="modal-close__text",x="modal-title",I="modal-title",L="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",T="js-modal-page",E="js-modal",j="js-modal-overlay",B="modal-overlay",M="Close modal",P="data-background-click",_="invisible",D="no-scroll",H="open",N="aria-labelledby",q="aria-hidden",F='aria-modal="true"',S="aria-haspopup",w="dialog",O=function(e){return t.getElementById(e)},R=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},$=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},K=function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},V=function(t,e){for(var a=!1,n=t.parentNode;n&&a===!1;)K(n,e)===!0?a=!0:n=n.parentNode;return a===!0?n.getAttribute("id"):""},z=function(t){var e=j,a=t.text||M,n=t.prefixClass+B,o="disabled"===t.backgroundEnabled?"disabled":"enabled";return'<span\n                  id="'+e+'"\n                  class="'+n+'"\n                  '+P+'="'+o+'"\n                  title="'+a+'"\n                  >\n                  <span class="'+_+'">'+a+"</span>\n                </span>"},G=function(t){var e=E,a=t.modalPrefixClass+l,n=t.modalPrefixClass+f,o=t.modalCloseImgPath?'<img\n                                        src="'+t.modalCloseImgPath+'"\n                                        alt="'+t.modalCloseText+'"\n                                        class="'+k+'"\n                                        />':'<span\n                                        class="'+y+'">\n                                        '+t.modalCloseText+"\n                                       </span>",d=t.modalPrefixClass+p,i=t.modalPrefixClass+I,r=""!==t.modalTitle?'<h1\n                                        id="'+x+'"\n                                        class="'+i+'">\n                                        '+t.modalTitle+"\n                                       </h1>":"",s='<button\n                             type="button"\n                             class="'+v+" "+n+'"\n                             id="'+g+'"\n                             title="'+t.modalCloseTitle+'"\n                             '+A+'="'+t.modalContentId+'"\n                             '+C+'="'+t.modalFocusBackId+'"\n                             >\n                             '+o+"\n                            </button>",c=t.modalText;if(""===c&&t.modalContentId){var u=O(t.modalContentId);u&&(c='<div\n                            id="'+h+'">\n                            '+u.innerHTML+"\n                           </div",u.innerHTML="")}return'<dialog\n                  id="'+e+'"\n                  class="'+a+'"\n                  '+H+"\n                  "+F+"\n                  "+N+'="'+x+'"\n                  >\n                  <div role="document">\n                    '+s+'\n                    <div class="'+d+'">\n                      '+r+"\n                      "+c+"\n                    </div>\n                  </div>\n                </dialog>"},J=function(t){if(a(t.modal),a(t.overlay),""!==t.contentBackId){var e=O(t.contentBackId);e&&(e.innerHTML=t.modalContent)}if(t.modalFocusBackId){var n=O(t.modalFocusBackId);n&&n.focus()}},Q=function(){return[].slice.call(t.querySelectorAll("."+n))},U=function W(){Q().forEach(function(a,n){var l=n+1,d=O(T),i=t.querySelector("body");if(a.setAttribute("id",o+l),a.setAttribute(S,w),null===d||0===d.length){var r=t.createElement("DIV");r.setAttribute("id",T),e(i,r)}}),["click","keydown"].forEach(function(e){t.body.addEventListener(e,function(a){var o=V(a.target,n);if((K(a.target,n)===!0||""!==o)&&"click"===e){var l=t.querySelector("body"),f=""!==o?O(o):a.target,p=f.hasAttribute(i)===!0?f.getAttribute(i)+"-":"",k=f.hasAttribute(r)===!0?f.getAttribute(r):"",y=f.hasAttribute(s)===!0?f.getAttribute(s):"",x=f.hasAttribute(c)===!0?f.getAttribute(c):"",I=f.hasAttribute(u)===!0?f.getAttribute(u):M,B=f.hasAttribute(m)===!0?f.getAttribute(m):I,_=f.hasAttribute(b)===!0?f.getAttribute(b):"",H=f.hasAttribute(d)===!0?f.getAttribute(d):"",N=O(T);l.insertAdjacentHTML("beforeEnd",z({text:B,backgroundEnabled:H,prefixClass:p})),l.insertAdjacentHTML("beforeEnd",G({modalText:k,modalPrefixClass:p,backgroundEnabled:y,modalTitle:x,modalCloseText:I,modalCloseTitle:B,modalCloseImgPath:_,modalContentId:y,modalFocusBackId:f.getAttribute("id")})),N.setAttribute(q,"true"),R(l,D);var F=O(g);F.focus(),a.preventDefault()}var S=V(a.target,v);if((a.target.getAttribute("id")===g||""!==S||a.target.getAttribute("id")===j)&&"click"===e){var l=t.querySelector("body"),N=O(T),w=O(E),Q=O(h)?O(h).innerHTML:"",U=O(j),W=O(g),X=W.getAttribute(C),Y=W.getAttribute(A),H=U.getAttribute(P);a.target.getAttribute("id")===j&&"disabled"===H||(J({modal:w,modalContent:Q,overlay:U,modalFocusBackId:X,contentBackId:Y,backgroundEnabled:H,fromId:a.target.getAttribute("id")}),N.removeAttribute(q),$(l,D))}if(O(E)&&"keydown"===e){var l=t.querySelector("body"),N=O(T),w=O(E),Q=O(h)?O(h).innerHTML:"",U=O(j),W=O(g),X=W.getAttribute(C),Y=W.getAttribute(A),Z=[].slice.call(w.querySelectorAll(L));27===a.keyCode&&(J({modal:w,modalContent:Q,overlay:U,modalFocusBackId:X,contentBackId:Y}),N.removeAttribute(q),$(l,D)),9===a.keyCode&&Z.indexOf(a.target)>=0&&(a.shiftKey?a.target===Z[0]&&(Z[Z.length-1].focus(),a.preventDefault()):a.target===Z[Z.length-1]&&(Z[0].focus(),a.preventDefault())),9===a.keyCode&&Z.indexOf(a.target)===-1&&(a.preventDefault(),Z[0].focus())}},!0)}),document.removeEventListener("DOMContentLoaded",W)};document.addEventListener("DOMContentLoaded",U)}(document);
