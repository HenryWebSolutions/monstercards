<%= content_for :search_bar do  %>
  <%= render 'shared/search_bar' %>
<% end %>

<article id="monster-list" class="pt5 mt5">
  <%= render 'monsters/empty', empty: @monsters.nil? %>
</article>

<script type="text/javascript">
  if(localStorage.hasOwnProperty('favourites') == true &&
    "<%= @monster_set.slug.html_safe %>" in JSON.parse(localStorage.getItem('favourites')) &&
    JSON.parse(localStorage.getItem('favourites'))["<%= @monster_set.slug.html_safe %>"].length > 0){
    $.ajax({
      url: "/favourites/fetch",
      data: {favourite_monsters: JSON.parse(localStorage.favourites)["<%= @monster_set.slug.html_safe %>"]},
      success: function (data, response) {
        $('article#monster-list').append(data)
        monsters.init();
        favourites.init({set:"<%=@monster_set.slug.html_safe%>"});
      },
    });
  } else {
  // render the partial in _empty_state
  }
</script>